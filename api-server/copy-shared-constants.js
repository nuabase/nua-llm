import { readFileSync, writeFileSync } from "fs";

const sourceFile =
  "../../console/app/frontend/packages/dbu-shared/dbu-shared-constants.ts";
const targetFile = "src/dbu-shared-constants.ts";

const warningComment = `// WARNING: This file is automatically copied from ${sourceFile}
// DO NOT EDIT THIS FILE DIRECTLY - all changes must be made in the Rails server directory
// This file is always overwritten everytime 'npm run dev' is run (which executes copy-shared-constants.js)

`;

try {
  const content = readFileSync(sourceFile, "utf8");
  const contentWithWarning = warningComment + content;
  writeFileSync(targetFile, contentWithWarning);
  console.log(`Successfully copied ${sourceFile} to ${targetFile}`);
} catch (error) {
  console.error("Error copying file:", error);
  process.exit(1);
}
